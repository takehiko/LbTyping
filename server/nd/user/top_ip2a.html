<!DOCTYPE html>
<html lang="ja">
<head>
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta charset="UTF-8">
<title>Infomation Processing Typing - Top</title>

<style type="text/css">
div {
  margin: 0 auto;
}
.header {
  position: relative; 
  left: 0px; 
  top: 0px;
  background-color: #bdf7f1;
  height:50px;
  max-width:1500px;
  font-size: 40px;
}
.header-logo {
  margin: 0 auto;
  text-align:center;
}
.wrapper {
  /* border:1px solid black; */
  display:block;
  max-width:750px;
  margin:0 auto;

  position:relative;
  left:6.5%;
}
</style>

</head>
<body>
<div class ="header">
  <div class="header-logo">Infomation Processing Typing</div>
</div>

<div class="wrapper">
  <p>In Information Processing II A (System Engineering Department, Murakawa), we promote continuous learning of programming through "typing",<br>
  and provide support for it.<br>
  By using this service, you can learn the important points of programs written in C<br>
  effectively and efficiently.<br>
  <br>
  This service is based on something called <a href="https://github.com/takehiko/LbTyping">LbTyping</a> that we released in March 2021,<br>
  and we are improving its functions and arranging the problems (we will add a little every week) for this class.<br>
  When you finish typing once, your typing time and the number of mistypes will be displayed.<br>
  In addition, you can read detailed explanations and edit and run on paiza.io.<br>
  Please use it regardless of whether it is during class time or not.<br>
  <br>
  For implementation, we have a "Precautions" button before starting typing, so please<br>
  press the button and check there.<br>
  </p>
  <p id="msgsid1">Please enter your student number first</p>
  <p>
  Student number <input type="text" name="sid" id="sid" size="10">
  <input type="button" value="Set" onclick="setsid()">
  </p>
  
  <p id="msgsid2"><button type="button" onclick="location.href='choice.html'">To the problem selection screen</button></p>

    <p id="msgsid3"><button type="button" onclick="location.href='replay-q.html'">Go to replay problem selection screen</button></p>

    <p><button id="button_dialog" type="button" onclick="toggle_dialog();">Display update history</button></p>
    <dialog id="dialog">
    Update history
    <ul>
        <li>November 24, 2022: The number of problems has been increased to 34. During replay, a sound is made when typing and mistyping. You can also choose not to make a sound with a button.
        <li>November 17, 2022: The number of problems has been increased to 28. A replay function has been added to reproduce the model and your own typing situation (please press the "Replay" button at the bottom of the problem selection screen).
        <li>November 10, 2022: The number of problems has been increased to 22. On the result announcement screen, if you click the "【Rank...】..." part twice, the message below will disappear. The update history can be displayed/hidden by pressing a button.
        <li>October 27, 2022: The number of problems has been increased to 18. On the problem selection screen, the display has been enhanced so that you can choose supplementary problems. Also, a "Check Achievement" button has been installed, and you can now check the status of your past implementation.
        <li>October 20, 2022: Including supplementary problems, the number of problems has been increased to 12. On macOS, you can type "<span lang="en" style="font-family: Courier New; font-size: 24px;">\</span>" by pressing ¥.
        <li>October 13, 2022: It was first provided in class. There were three problems.
    </ul>
    </dialog>
</div>

<script>
// グローバル変数（いくつかの関数内で参照・更新する）
const sid_id = "sid";
let sid = null;
const flag_enable_replay = false;

// 学生番号を設定する
// nullまたは空文字列のときは設定を消去する
const setsid = () => {
  sid = document.getElementById(sid_id).value;

  // 学生番号チェック
  if (!sid.match(/^\d+$/)) {
    sid = null;
    document.getElementById("msgsid1").removeAttribute("hidden");
    document.getElementById("msgsid2").setAttribute("hidden", "hidden");
    document.getElementById("msgsid3").setAttribute("hidden", "hidden");
    alert("We are sorry.\nbut please enter student numbers in numerals only.");
    return;
  }

  const cookie_sid = (sid == null || sid == '') ? 'sid=;max-age=0;path=/' : `sid=${sid};path=/`;
  document.cookie = cookie_sid;
  getsid();
}

// 学生番号をクッキーから読み出す
// 設定されているか否かで表示内容を変える
const getsid = () => {
  document.cookie.split(/; */).forEach((s) => {
    const v = s.split(/=/);
    if (v[0] == 'sid') sid = v[1];
  })
  if (sid) {
    document.getElementById(sid_id).value = sid;
    document.getElementById("msgsid1").setAttribute("hidden", "hidden");
    document.getElementById("msgsid2").removeAttribute("hidden");
    if (flag_enable_replay) {
      document.getElementById("msgsid3").removeAttribute("hidden");
    } else {
      document.getElementById("msgsid3").setAttribute("hidden", "hidden");
    }
  } else {
    document.getElementById("msgsid1").removeAttribute("hidden");
    document.getElementById("msgsid2").setAttribute("hidden", "hidden");
    document.getElementById("msgsid3").setAttribute("hidden", "hidden");
  }
  return sid;
}
getsid();

const toggle_dialog = () => {
  const d = document.getElementById('dialog');
  const b = document.getElementById('button_dialog');
  if (d.open) {
    d.close();
    b.innerHTML = "Show update history";
  } else {
    d.show();
    b.innerHTML = "Hide update history";
  }
}
</script>

</body> </html>
